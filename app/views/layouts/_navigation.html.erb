<% if logged_in? %>
<nav class="navbar navbar-expand-lg bg-blue">
  <div class="container-fluid">
    <%= link_to "Alpha blog" , root_path, class: "navbar-brand" %>
    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item"></li>
        <li>
          <%= link_to "All Articles" , articles_path, class: "nav-link" %>
        </li>

        <li class="nav-item">
          <%= link_to "Discover users" , users_path, class: "nav-link " %>
        </li>
        <li class="nav-item">
          <%= link_to "New artcile" , new_article_path,target:"_blank",class:
          "nav-link" %>
        </li>
        <ul class="navbar-nav second-nav">
          <li class="nav-item dropdown">
            <a
              class="nav-link dropdown-toggle"
              href="#"
              role="button"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              categories
            </a>
            <ul class="dropdown-menu">
              <li>
                <%= link_to "All categories" , categories_path, class:
                "dropdown-item" %>
              </li>
              <% Category.all.each do |category|%>
              <li>
                <%= link_to "#{category.name}", category_path(category) ,class:
                "dropdown-item" %>
              </li>
              <%end%>
            </ul>
          </li>
        </ul>
      </ul>
      <form class="d-flex formo" role="search">
        <input
          class="form-control me-2"
          type="search"
          placeholder="Search"
          aria-label="Search"
        />
        <button class="btn btn-outline-success" type="submit">Search</button>
      </form>
      <ul class="navbar-nav second-nav">
        <li class="nav-item dropdown">
          <a
            class="nav-link dropdown-toggle"
            href="#"
            role="button"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <%= current_user.username%>
          </a>
          <ul class="dropdown-menu">
            <li>
              <%= link_to "Your profile" , user_path(current_user) ,class:
              "dropdown-item" %>
            </li>
            <li>
              <%= link_to "Edit your profile" , edit_user_path(current_user) ,
              class: "dropdown-item" %>
            </li>
            <li>
                <li>
              <%= link_to "Create new category" ,new_category_path ,
              class: "dropdown-item" %>
            </li>
              <%= button_to "Delete your account" , user_path(current_user),
              method: :delete, class: "dropdown-item delete" %>
            </li>
            <li>
              <hr class="dropdown-divider" />
            </li>
            <li>
              <%=button_to "Logout" , logout_path, method: :delete, class:
              "dropdown-item" %>
            </li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>

<% else %>
<nav class="navbar navbar-expand-lg bg-blue">
  <div class="container-fluid">
    <%= link_to "Alpha blog" , root_path, class: "navbar-brand" %>
    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <%= link_to "All Articles" , articles_path, class: "nav-link" %>
        </li>

        <li class="nav-item">
          <%= link_to "Login" , "login", class: "nav-link" %>
        </li>
        <li>
          <%= link_to "New artcile" , new_article_path,class: "nav-link" %>
        </li>
        <ul class="navbar-nav second-nav">
          <li class="nav-item dropdown">
            <a
              class="nav-link dropdown-toggle"
              href="#"
              role="button"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              categories
            </a>
            <ul class="dropdown-menu">
              <li>
                <%= link_to "All categories" , categories_path, class:
                "dropdown-item" %>
              </li>
              <% Category.all.each do |category|%>
              <li>
                <%= link_to "#{category.name}", articles_path(category) ,class:
                "dropdown-item" %>
              </li>
              <%end%>
            </ul>
          </li>
        </ul>
      </ul>

      <form class="d-flex" role="search">
        <input
          class="form-control me-2"
          type="search"
          placeholder="Search"
          aria-label="Search"
        />
        <button class="btn btn-outline-success" type="submit">Search</button>
      </form>
      <ul class="navbar-nav second-nav">
        <li class="nav-item dropdown">
          <a
            class="nav-link dropdown-toggle"
            href="#"
            role="button"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            Actions
          </a>
          <ul class="dropdown-menu">
            <li>
              <%= link_to "Your profile" , new_article_path,class:
              "dropdown-item" %>
            </li>
            <li><%= link_to "Login" , "login" , class: "dropdown-item" %></li>
            <li>
              <hr class="dropdown-divider" />
            </li>
            <li><%= link_to "sign up" , "signup",class: "dropdown-item" %></li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>
<%end %>
